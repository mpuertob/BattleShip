!function(o){var t={};function e(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:!1,exports:{}};return o[r].call(n.exports,n,n.exports,e),n.l=!0,n.exports}e.m=o,e.c=t,e.d=function(o,t,r){e.o(o,t)||Object.defineProperty(o,t,{enumerable:!0,get:r})},e.r=function(o){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})},e.t=function(o,t){if(1&t&&(o=e(o)),8&t)return o;if(4&t&&"object"==typeof o&&o&&o.__esModule)return o;var r=Object.create(null);if(e.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:o}),2&t&&"string"!=typeof o)for(var n in o)e.d(r,n,function(t){return o[t]}.bind(null,n));return r},e.n=function(o){var t=o&&o.__esModule?function(){return o.default}:function(){return o};return e.d(t,"a",t),t},e.o=function(o,t){return Object.prototype.hasOwnProperty.call(o,t)},e.p="",e(e.s=5)}([function(o,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Coordenada=void 0;var r=e(2),n=function(){function o(o,t){this._x=o,this._y=t}return Object.defineProperty(o.prototype,"x",{get:function(){return this._x},set:function(o){this._x=o},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"y",{get:function(){return this._y},set:function(o){this._y=o},enumerable:!1,configurable:!0}),o.prototype.equals=function(o){return this.x==o.x&&this.y==o.y},o.prototype.mover=function(o){o==r.Sentido.abajo?this.bajar():this.avanzar()},o.prototype.bajar=function(){this.y++},o.prototype.avanzar=function(){this.x++},o}();t.Coordenada=n},function(o,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Estado=void 0,function(o){o[o.tocado=0]="tocado",o[o.hundido=1]="hundido",o[o.indemne=2]="indemne"}(t.Estado||(t.Estado={}))},function(o,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Sentido=void 0,function(o){o[o.abajo=0]="abajo",o[o.derecha=1]="derecha"}(t.Sentido||(t.Sentido={}))},function(o,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Dimension=void 0;var r=function(){function o(o,t){this._ancho=o,this._largo=t}return Object.defineProperty(o.prototype,"ancho",{get:function(){return this._ancho},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"largo",{get:function(){return this._largo},enumerable:!1,configurable:!0}),o}();t.Dimension=r},function(o,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Flota=void 0;var r=e(1),n=e(8),i=function(){function o(o){this._dimension=o,this._flota=[],this._generadorFlota=new n.GeneradorFlota(this._dimension),this.crearFlotas()}return o.prototype.comprobarBarcosTotalesHundidos=function(o){for(var t,e=0;e<this._flota.length;e++){t=0;for(var n=this._flota[e].posiciones.length,i=0;i<n;i++){if(this.getPosicionBarcoConcreto(e,i).estado==r.Estado.tocado&&t++,t==n){var a=this._flota[e];this.hundirBarco(a),o++,alert("Hundido")}}}return o},o.prototype.crearFlotas=function(){for(var o=[2,2,2,2,3,3,3,4,4],t=0;t<o.length;t++){var e=this._generadorFlota.crearBarco(o[t]);this._flota.push(e)}},o.prototype.getPosicionBarcoConcreto=function(o,t){return this._flota[o].posiciones[t]},o.prototype.hundirBarco=function(o){for(var t=o.posiciones,e=0;e<t.length;e++){t[e].estado=r.Estado.hundido}},Object.defineProperty(o.prototype,"flota",{get:function(){return this._flota},enumerable:!1,configurable:!0}),o}();t.Flota=i},function(o,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),(new(e(6).Juego)).play()},function(o,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Juego=void 0;var r=e(0),n=e(3),i=e(7),a=function(){function o(){this._dimension=new n.Dimension(8,12),this._tablero=new i.Tablero(this._dimension)}return o.prototype.play=function(){alert("Bienvenido al juego de Hundir La Flota\nTenemos 2 barcos de 4 posiciones, 3 barcos de 3 posiciones y 4 barcos de 2 posiciones\nDimensiones: "+this._dimension.ancho+"*"+this._dimension.largo);do{alert(this._tablero.mostrarTablero()),this._tablero.consultarCasilla(this.obtenerCoordenadaJugador())}while(!this._tablero.isHundidaTodaFlota())},o.prototype.obtenerCoordenadaJugador=function(){return new r.Coordenada(this.solicitarPosicionX(),this.solicitarPosicionY())},o.prototype.solicitarPosicionX=function(){var o;do{null==(o=prompt("Introduce posicion X"))&&(o=0)}while(!this.comprobarPosicionCorrecta(o,this._dimension.ancho));return o-1},o.prototype.solicitarPosicionY=function(){var o;do{null==(o=prompt("Introduce posicion Y"))&&(o=0)}while(!this.comprobarPosicionCorrecta(o,this._dimension.largo));return o-1},o.prototype.comprobarPosicionCorrecta=function(o,t){var e=!1;return o>=0&&o<t&&(e=!0),e},o}();t.Juego=a},function(o,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Tablero=void 0;var r=e(1),n=e(4),i=function(){function o(o){this._barcosHundido=0,this._dimension=o,this._flota=new n.Flota(this._dimension),this._tablero=new Array(this.ancho),this.montarTablero()}return o.prototype.montarTablero=function(){this.crearTablero(),this.colocarFlota()},o.prototype.crearTablero=function(){for(var o=0;o<this.largo;o++)this._tablero[o]=new Array(this.largo)},o.prototype.colocarFlota=function(){for(var o=0;o<this.longitudFlotaCompleta;o++)for(var t=0;t<this.getLongitudBarcoFlotaConcreto(o);t++)this.ponerFlota(this.getCoordenadaConcretaBarco(o,t),this.getBarcoConcretoFlota(o).posiciones[t])},o.prototype.ponerFlota=function(o,t){this._tablero[o.x][o.y]=t},o.prototype.mostrarTablero=function(){var o="   ";o+="     ";for(var t=0;t<this.ancho;t++)o+=t+1+"  |  ";o+="\n";for(var e=0;e<this.largo;e++){o+=e+1+"  |   ";for(t=0;t<this.ancho;t++)null!=this._tablero[e][t]?o+=this.dibujarCasilla(this._tablero[e][t]):o+="X  |  ";o+="\n"}return o},o.prototype.dibujarCasilla=function(o){return"A"==o?"A  |  ":o.estado==r.Estado.indemne?"B  |  ":o.estado==r.Estado.tocado?"T  |  ":"H  |  "},o.prototype.consultarCasilla=function(o){var t=o.x,e=o.y,n=this._tablero[t][e];return null==n?(alert("Agua"),n="A"):n.estado==r.Estado.indemne&&(alert("Tocado"),n.estado=r.Estado.tocado,this._barcosHundido=this._flota.comprobarBarcosTotalesHundidos(this._barcosHundido)),""},o.prototype.isHundidaTodaFlota=function(){return this._barcosHundido==this.longitudFlota},Object.defineProperty(o.prototype,"tablero",{get:function(){return this._tablero},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"numeroBarcosHundidos",{get:function(){return this._barcosHundido},set:function(o){this._barcosHundido=o},enumerable:!1,configurable:!0}),o.prototype.getBarcoConcretoFlota=function(o){return this._flota.flota[o]},o.prototype.getLongitudBarcoFlotaConcreto=function(o){return this.getBarcoConcretoFlota(o).size},Object.defineProperty(o.prototype,"flotaCompleta",{get:function(){return this._flota.flota},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"longitudFlotaCompleta",{get:function(){return this.flotaCompleta.length},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"ancho",{get:function(){return this._dimension.ancho},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"largo",{get:function(){return this._dimension.largo},enumerable:!1,configurable:!0}),o.prototype.getCoordenadaConcretaBarco=function(o,t){return this.getBarcoConcretoFlota(o).posiciones[t].coordenada},Object.defineProperty(o.prototype,"longitudFlota",{get:function(){return this._flota.flota.length},enumerable:!1,configurable:!0}),o}();t.Tablero=i},function(o,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GeneradorFlota=void 0;var r=e(9),n=e(0),i=e(2),a=function(){function o(o){this._dimension=o}return o.prototype.crearBarco=function(o){var t,e;do{t=this.obtenerSentidoAleatorio(),e=this.crearCoordenadaInicial()}while(this.isDentroLimites(o,t,e));return new r.Barco(o,e,t)},o.prototype.obtenerNumeroAleatorio=function(o,t){t+=1;var e=Math.random()*(t-o+o);return Math.floor(e)},o.prototype.obtenerSentidoAleatorio=function(){return 1==this.obtenerNumeroAleatorio(0,1)?i.Sentido.abajo:i.Sentido.derecha},o.prototype.crearCoordenadaInicial=function(){var o=this.obtenerNumeroAleatorio(0,this._dimension.ancho),t=this.obtenerNumeroAleatorio(0,this._dimension.largo);return new n.Coordenada(o,t)},o.prototype.isDentroLimites=function(o,t,e){var r=!1;t==i.Sentido.abajo?o+e.y>this._dimension.largo&&(r=!0):o+e.x>this._dimension.ancho&&(r=!0);return r},o}();t.GeneradorFlota=a},function(o,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Barco=void 0;var r=e(1),n=e(0),i=e(10),a=function(){function o(o,t,e){this._size=o,this._posiciones=[],this.crearBarco(t,e)}return o.prototype.crearBarco=function(o,t){for(var e=0;e<this.size;e++)this.posiciones.push(new i.Casilla(new n.Coordenada(o.x,o.y),r.Estado.indemne)),o.mover(t)},o.prototype.compruebaSolapamiento=function(o){for(var t=0;t<o.length;t++)for(var e=0;e<this.posiciones.length;e++)if(this.posiciones[e].coordenada.equals(o[t].coordenada))return!0;return!1},Object.defineProperty(o.prototype,"size",{get:function(){return this._size},enumerable:!1,configurable:!0}),o.prototype.getCoordenada=function(o){return this._posiciones[o].coordenada},Object.defineProperty(o.prototype,"posiciones",{get:function(){return this._posiciones},enumerable:!1,configurable:!0}),o}();t.Barco=a},function(o,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Casilla=void 0;var r=function(){function o(o,t){this._coordenada=o,this._estado=t}return Object.defineProperty(o.prototype,"coordenada",{get:function(){return this._coordenada},set:function(o){this._coordenada=o},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"estado",{get:function(){return this._estado},set:function(o){this._estado=o},enumerable:!1,configurable:!0}),o}();t.Casilla=r}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL21vZGVsby9jb29yZGVuYWRhLnRzIiwid2VicGFjazovLy8uL3NyYy9tb2RlbG8vZXN0YWRvLnRzIiwid2VicGFjazovLy8uL3NyYy9tb2RlbG8vc2VudGlkby50cyIsIndlYnBhY2s6Ly8vLi9zcmMvbW9kZWxvL0RpbWVuc2lvbi50cyIsIndlYnBhY2s6Ly8vLi9zcmMvbW9kZWxvL2Zsb3RhLnRzIiwid2VicGFjazovLy8uL3NyYy9NYWluLnRzIiwid2VicGFjazovLy8uL3NyYy9jb250cm9sL2p1ZWdvLnRzIiwid2VicGFjazovLy8uL3NyYy9tb2RlbG8vVGFibGVyby50cyIsIndlYnBhY2s6Ly8vLi9zcmMvbW9kZWxvL2dlbmVyYWRvckZsb3RhLnRzIiwid2VicGFjazovLy8uL3NyYy9tb2RlbG8vQmFyY28udHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21vZGVsby9jYXNpbGxhLnRzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiX3giLCJfeSIsInRoaXMiLCJ4cyIsInlzIiwiZXF1YWxzIiwiY29vcmRlbmEiLCJ4IiwieSIsIm1vdmVyIiwiZGlyZWNjaW9uIiwiU2VudGlkbyIsImFiYWpvIiwiYmFqYXIiLCJhdmFuemFyIiwiQ29vcmRlbmFkYSIsIkVzdGFkbyIsIl9hbmNobyIsIl9sYXJnbyIsIkRpbWVuc2lvbiIsIl9kaW1lbnNpb24iLCJfZmxvdGEiLCJfZ2VuZXJhZG9yRmxvdGEiLCJHZW5lcmFkb3JGbG90YSIsImNyZWFyRmxvdGFzIiwiY29tcHJvYmFyQmFyY29zVG90YWxlc0h1bmRpZG9zIiwibnVtZXJvQmFyY29zSHVuZGlkb3MiLCJ0b2NhZG9zIiwibGVuZ3RoIiwibG9uZ2l0dWRGbG90YUJhcmNvcyIsInBvc2ljaW9uZXMiLCJqIiwiZ2V0UG9zaWNpb25CYXJjb0NvbmNyZXRvIiwiZXN0YWRvIiwidG9jYWRvIiwiYmFyY29BaHVuZGlyIiwiaHVuZGlyQmFyY28iLCJhbGVydCIsInRhbWFub0JhcmNvcyIsImJhcmNvIiwiY3JlYXJCYXJjbyIsInB1c2giLCJwb3NpY2lvbkJhcmNvIiwicG9zaWNpb25DYXNpbGxhIiwiY2FzaWxsYXNCYXJjbyIsImh1bmRpZG8iLCJGbG90YSIsIkp1ZWdvIiwicGxheSIsIl90YWJsZXJvIiwiVGFibGVybyIsImFuY2hvIiwibGFyZ28iLCJtb3N0cmFyVGFibGVybyIsImNvbnN1bHRhckNhc2lsbGEiLCJvYnRlbmVyQ29vcmRlbmFkYUp1Z2Fkb3IiLCJpc0h1bmRpZGFUb2RhRmxvdGEiLCJzb2xpY2l0YXJQb3NpY2lvblgiLCJzb2xpY2l0YXJQb3NpY2lvblkiLCJwb3NpY2lvblgiLCJwcm9tcHQiLCJjb21wcm9iYXJQb3NpY2lvbkNvcnJlY3RhIiwicG9zaWNpb25ZIiwicG9zaWNpb24iLCJsaW1pdGUiLCJyZXNwb25zZSIsImRpbWVuc2lvbiIsIl9iYXJjb3NIdW5kaWRvIiwiQXJyYXkiLCJtb250YXJUYWJsZXJvIiwiY3JlYXJUYWJsZXJvIiwiY29sb2NhckZsb3RhIiwiaW5kZXgiLCJsb25naXR1ZEZsb3RhQ29tcGxldGEiLCJnZXRMb25naXR1ZEJhcmNvRmxvdGFDb25jcmV0byIsInBvbmVyRmxvdGEiLCJnZXRDb29yZGVuYWRhQ29uY3JldGFCYXJjbyIsImdldEJhcmNvQ29uY3JldG9GbG90YSIsImNvb3JkZW5hZGEiLCJjYXNpbGxhQmFyY28iLCJ0YWJsZXJvIiwidW5kZWZpbmVkIiwiZGlidWphckNhc2lsbGEiLCJpbmRlbW5lIiwiY2FzaWxsYSIsImxvbmdpdHVkRmxvdGEiLCJudW1lcm8iLCJmbG90YSIsInNpemUiLCJmbG90YUNvbXBsZXRhIiwidGFtYW5vQmFyY28iLCJzZW50aWRvQmFyY28iLCJjb29yZGVuYWRhSW5pY2lhbCIsIm9idGVuZXJTZW50aWRvQWxlYXRvcmlvIiwiY3JlYXJDb29yZGVuYWRhSW5pY2lhbCIsImlzRGVudHJvTGltaXRlcyIsIkJhcmNvIiwib2J0ZW5lck51bWVyb0FsZWF0b3JpbyIsIm1pbmltbyIsIm1heGltbyIsImFsZWF0b3JpbyIsIk1hdGgiLCJyYW5kb20iLCJmbG9vciIsImRlcmVjaGEiLCJjb29yZGVuYWRhQmFyY28iLCJzdXBlcmFMaW1pdGUiLCJfc2l6ZSIsImluaWNpYWwiLCJfcG9zaWNpb25lcyIsIkNhc2lsbGEiLCJjb21wcnVlYmFTb2xhcGFtaWVudG8iLCJpbmRleE9iamVjdCIsImdldENvb3JkZW5hZGEiLCJfY29vcmRlbmFkYSIsIl9lc3RhZG8iXSwibWFwcGluZ3MiOiJhQUNFLElBQUlBLEVBQW1CLEdBR3ZCLFNBQVNDLEVBQW9CQyxHQUc1QixHQUFHRixFQUFpQkUsR0FDbkIsT0FBT0YsRUFBaUJFLEdBQVVDLFFBR25DLElBQUlDLEVBQVNKLEVBQWlCRSxHQUFZLENBQ3pDRyxFQUFHSCxFQUNISSxHQUFHLEVBQ0hILFFBQVMsSUFVVixPQU5BSSxFQUFRTCxHQUFVTSxLQUFLSixFQUFPRCxRQUFTQyxFQUFRQSxFQUFPRCxRQUFTRixHQUcvREcsRUFBT0UsR0FBSSxFQUdKRixFQUFPRCxRQUtmRixFQUFvQlEsRUFBSUYsRUFHeEJOLEVBQW9CUyxFQUFJVixFQUd4QkMsRUFBb0JVLEVBQUksU0FBU1IsRUFBU1MsRUFBTUMsR0FDM0NaLEVBQW9CYSxFQUFFWCxFQUFTUyxJQUNsQ0csT0FBT0MsZUFBZWIsRUFBU1MsRUFB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InNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSA1KTtcbiIsImltcG9ydCB7IFNlbnRpZG8gfSBmcm9tIFwiLi9zZW50aWRvXCI7XG5leHBvcnQgY2xhc3MgQ29vcmRlbmFkYSB7XG4gIC8vTGEgZm9ybWEgdHMgcGFyYSBkZWNsYXJhciBwcm9waWVkYWRlcyBvYmxpZ2F0b3JpYXNcbiAgY29uc3RydWN0b3IocHJpdmF0ZSBfeDogbnVtYmVyLCBwcml2YXRlIF95OiBudW1iZXIpIHt9XG5cbiAgcHVibGljIGdldCB4KCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuX3g7XG4gIH1cbiAgcHVibGljIHNldCB4KHhzOiBudW1iZXIpIHtcbiAgICB0aGlzLl94ID0geHM7XG4gIH1cbiAgcHVibGljIGdldCB5KCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuX3k7XG4gIH1cbiAgcHVibGljIHNldCB5KHlzOiBudW1iZXIpIHtcbiAgICB0aGlzLl95ID0geXM7XG4gIH1cbiAgLy9IYXkgY29zYXMgamF2YSBxdWUgc2llbXByZSB2aWVuZW4gYmllblxuICBwdWJsaWMgZXF1YWxzKGNvb3JkZW5hOiBDb29yZGVuYWRhKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMueCA9PSBjb29yZGVuYS54ICYmIHRoaXMueSA9PSBjb29yZGVuYS55O1xuICB9XG4gIHB1YmxpYyBtb3ZlcihkaXJlY2Npb246IFNlbnRpZG8pIHtcbiAgICBpZiAoZGlyZWNjaW9uID09IFNlbnRpZG8uYWJham8pIHtcbiAgICAgIHRoaXMuYmFqYXIoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5hdmFuemFyKCk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIGJhamFyKCkge1xuICAgIHRoaXMueSsrO1xuICB9XG4gIHB1YmxpYyBhdmFuemFyKCkge1xuICAgIHRoaXMueCsrO1xuICB9XG59XG4iLCJleHBvcnQgZW51bSBFc3RhZG8ge1xuICB0b2NhZG8sXG4gIGh1bmRpZG8sXG4gIGluZGVtbmUsXG59XG4iLCJleHBvcnQgZW51bSBTZW50aWRvIHtcbiAgYWJham8sXG4gIGRlcmVjaGEsXG59XG4iLCJleHBvcnQgY2xhc3MgRGltZW5zaW9uIHtcclxuICBjb25zdHJ1Y3Rvcihwcml2YXRlIF9hbmNobzogbnVtYmVyLCBwcml2YXRlIF9sYXJnbzogbnVtYmVyKSB7fVxyXG5cclxuICBwdWJsaWMgZ2V0IGFuY2hvKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX2FuY2hvO1xyXG4gIH1cclxuICBwdWJsaWMgZ2V0IGxhcmdvKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX2xhcmdvO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgeyBCYXJjbyB9IGZyb20gXCIuL0JhcmNvXCI7XG5pbXBvcnQgeyBDYXNpbGxhIH0gZnJvbSBcIi4vY2FzaWxsYVwiO1xuaW1wb3J0IHsgQ29vcmRlbmFkYSB9IGZyb20gXCIuL2Nvb3JkZW5hZGFcIjtcbmltcG9ydCB7IERpbWVuc2lvbiB9IGZyb20gXCIuL0RpbWVuc2lvblwiO1xuaW1wb3J0IHsgRXN0YWRvIH0gZnJvbSBcIi4vZXN0YWRvXCI7XG5pbXBvcnQgeyBHZW5lcmFkb3JGbG90YSB9IGZyb20gXCIuL2dlbmVyYWRvckZsb3RhXCI7XG5cbi8qRXMgbGEgY2xhc2VcbnF1ZSBjb250aWVuZSB0b2RvcyBsb3MgYmFyY29zIFxuKi9cbmV4cG9ydCBjbGFzcyBGbG90YSB7XG4gIHByaXZhdGUgX2dlbmVyYWRvckZsb3RhOiBHZW5lcmFkb3JGbG90YTtcbiAgcHJpdmF0ZSBfZmxvdGE6IEJhcmNvW10gPSBbXTtcbiAgY29uc3RydWN0b3IocHJpdmF0ZSBfZGltZW5zaW9uOiBEaW1lbnNpb24pIHtcbiAgICB0aGlzLl9nZW5lcmFkb3JGbG90YSA9IG5ldyBHZW5lcmFkb3JGbG90YSh0aGlzLl9kaW1lbnNpb24pO1xuICAgIHRoaXMuY3JlYXJGbG90YXMoKTtcbiAgfVxuICBwdWJsaWMgY29tcHJvYmFyQmFyY29zVG90YWxlc0h1bmRpZG9zKG51bWVyb0JhcmNvc0h1bmRpZG9zOiBudW1iZXIpOiBudW1iZXIge1xuICAgIGxldCB0b2NhZG9zOiBudW1iZXI7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLl9mbG90YS5sZW5ndGg7IGkrKykge1xuICAgICAgdG9jYWRvcyA9IDA7XG4gICAgICBsZXQgbG9uZ2l0dWRGbG90YUJhcmNvczogbnVtYmVyID0gdGhpcy5fZmxvdGFbaV0ucG9zaWNpb25lcy5sZW5ndGg7XG4gICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGxvbmdpdHVkRmxvdGFCYXJjb3M7IGorKykge1xuICAgICAgICBsZXQgY2FzaWxsYTogQ2FzaWxsYSA9IHRoaXMuZ2V0UG9zaWNpb25CYXJjb0NvbmNyZXRvKGksIGopO1xuICAgICAgICBpZiAoY2FzaWxsYS5lc3RhZG8gPT0gRXN0YWRvLnRvY2Fkbykge1xuICAgICAgICAgIHRvY2Fkb3MrKztcbiAgICAgICAgfVxuICAgICAgICBpZiAodG9jYWRvcyA9PSBsb25naXR1ZEZsb3RhQmFyY29zKSB7XG4gICAgICAgICAgbGV0IGJhcmNvQWh1bmRpcjogQmFyY28gPSB0aGlzLl9mbG90YVtpXTtcbiAgICAgICAgICB0aGlzLmh1bmRpckJhcmNvKGJhcmNvQWh1bmRpcik7XG4gICAgICAgICAgbnVtZXJvQmFyY29zSHVuZGlkb3MrKztcbiAgICAgICAgICBhbGVydChcIkh1bmRpZG9cIik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG51bWVyb0JhcmNvc0h1bmRpZG9zO1xuICB9XG5cbiAgcHJpdmF0ZSBjcmVhckZsb3RhcygpOiB2b2lkIHtcbiAgICBjb25zdCB0YW1hbm9CYXJjb3MgPSBbMiwgMiwgMiwgMiwgMywgMywgMywgNCwgNF07XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0YW1hbm9CYXJjb3MubGVuZ3RoOyBpKyspIHtcbiAgICAgIGxldCBiYXJjbzogQmFyY28gPSB0aGlzLl9nZW5lcmFkb3JGbG90YS5jcmVhckJhcmNvKHRhbWFub0JhcmNvc1tpXSk7XG4gICAgICB0aGlzLl9mbG90YS5wdXNoKGJhcmNvKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGdldFBvc2ljaW9uQmFyY29Db25jcmV0byhcbiAgICBwb3NpY2lvbkJhcmNvOiBudW1iZXIsXG4gICAgcG9zaWNpb25DYXNpbGxhOiBudW1iZXJcbiAgKTogQ2FzaWxsYSB7XG4gICAgcmV0dXJuIHRoaXMuX2Zsb3RhW3Bvc2ljaW9uQmFyY29dLnBvc2ljaW9uZXNbcG9zaWNpb25DYXNpbGxhXTtcbiAgfVxuXG4gIHByaXZhdGUgaHVuZGlyQmFyY28oYmFyY286IEJhcmNvKSB7XG4gICAgbGV0IGNhc2lsbGFzQmFyY286IENhc2lsbGFbXSA9IGJhcmNvLnBvc2ljaW9uZXM7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjYXNpbGxhc0JhcmNvLmxlbmd0aDsgaSsrKSB7XG4gICAgICBsZXQgY2FzaWxsYTogQ2FzaWxsYSA9IGNhc2lsbGFzQmFyY29baV07XG4gICAgICBjYXNpbGxhLmVzdGFkbyA9IEVzdGFkby5odW5kaWRvO1xuICAgIH1cbiAgfVxuICBwdWJsaWMgZ2V0IGZsb3RhKCkge1xuICAgIHJldHVybiB0aGlzLl9mbG90YTtcbiAgfVxufVxuIiwiaW1wb3J0IHsgSnVlZ28gfSBmcm9tIFwiLi9jb250cm9sL2p1ZWdvXCI7XG5jb25zdCBqdWVnbyA9IG5ldyBKdWVnbygpO1xuanVlZ28ucGxheSgpO1xuIiwiaW1wb3J0IHsgQ29vcmRlbmFkYSB9IGZyb20gXCIuLi9tb2RlbG8vY29vcmRlbmFkYVwiO1xyXG5pbXBvcnQgeyBEaW1lbnNpb24gfSBmcm9tIFwiLi4vbW9kZWxvL0RpbWVuc2lvblwiO1xyXG5pbXBvcnQgeyBUYWJsZXJvIH0gZnJvbSBcIi4uL21vZGVsby9UYWJsZXJvXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgSnVlZ28ge1xyXG4gIHByaXZhdGUgX2RpbWVuc2lvbjogRGltZW5zaW9uID0gbmV3IERpbWVuc2lvbig4LCAxMik7XHJcbiAgcHJpdmF0ZSBfdGFibGVybzogVGFibGVybyA9IG5ldyBUYWJsZXJvKHRoaXMuX2RpbWVuc2lvbik7XHJcblxyXG4gIHB1YmxpYyBwbGF5KCk6IHZvaWQge1xyXG4gICAgYWxlcnQoXHJcbiAgICAgIGBCaWVudmVuaWRvIGFsIGp1ZWdvIGRlIEh1bmRpciBMYSBGbG90YVxcblRlbmVtb3MgMiBiYXJjb3MgZGUgNCBwb3NpY2lvbmVzLCAzIGJhcmNvcyBkZSAzIHBvc2ljaW9uZXMgeSA0IGJhcmNvcyBkZSAyIHBvc2ljaW9uZXNcXG5EaW1lbnNpb25lczogJHt0aGlzLl9kaW1lbnNpb24uYW5jaG99KiR7dGhpcy5fZGltZW5zaW9uLmxhcmdvfWBcclxuICAgICk7XHJcblxyXG4gICAgZG8ge1xyXG4gICAgICBhbGVydCh0aGlzLl90YWJsZXJvLm1vc3RyYXJUYWJsZXJvKCkpO1xyXG4gICAgICB0aGlzLl90YWJsZXJvLmNvbnN1bHRhckNhc2lsbGEodGhpcy5vYnRlbmVyQ29vcmRlbmFkYUp1Z2Fkb3IoKSk7XHJcbiAgICB9IHdoaWxlICghdGhpcy5fdGFibGVyby5pc0h1bmRpZGFUb2RhRmxvdGEoKSk7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIG9idGVuZXJDb29yZGVuYWRhSnVnYWRvcigpOiBDb29yZGVuYWRhIHtcclxuICAgIHJldHVybiBuZXcgQ29vcmRlbmFkYSh0aGlzLnNvbGljaXRhclBvc2ljaW9uWCgpLCB0aGlzLnNvbGljaXRhclBvc2ljaW9uWSgpKTtcclxuICB9XHJcbiAgcHJpdmF0ZSBzb2xpY2l0YXJQb3NpY2lvblgoKTogbnVtYmVyIHtcclxuICAgIHZhciBwb3NpY2lvblg6IGFueTtcclxuICAgIGRvIHtcclxuICAgICAgcG9zaWNpb25YID0gcHJvbXB0KFwiSW50cm9kdWNlIHBvc2ljaW9uIFhcIik7XHJcbiAgICAgIGlmIChwb3NpY2lvblggPT0gbnVsbCkge1xyXG4gICAgICAgIHBvc2ljaW9uWCA9IDA7XHJcbiAgICAgIH1cclxuICAgIH0gd2hpbGUgKCF0aGlzLmNvbXByb2JhclBvc2ljaW9uQ29ycmVjdGEocG9zaWNpb25YLCB0aGlzLl9kaW1lbnNpb24uYW5jaG8pKTtcclxuICAgIHJldHVybiBwb3NpY2lvblggLSAxO1xyXG4gIH1cclxuICBwcml2YXRlIHNvbGljaXRhclBvc2ljaW9uWSgpOiBudW1iZXIge1xyXG4gICAgdmFyIHBvc2ljaW9uWTogYW55O1xyXG4gICAgZG8ge1xyXG4gICAgICBwb3NpY2lvblkgPSBwcm9tcHQoXCJJbnRyb2R1Y2UgcG9zaWNpb24gWVwiKTtcclxuICAgICAgaWYgKHBvc2ljaW9uWSA9PSBudWxsKSB7XHJcbiAgICAgICAgcG9zaWNpb25ZID0gMDtcclxuICAgICAgfVxyXG4gICAgfSB3aGlsZSAoIXRoaXMuY29tcHJvYmFyUG9zaWNpb25Db3JyZWN0YShwb3NpY2lvblksIHRoaXMuX2RpbWVuc2lvbi5sYXJnbykpO1xyXG4gICAgcmV0dXJuIHBvc2ljaW9uWSAtIDE7XHJcbiAgfVxyXG4gIHByaXZhdGUgY29tcHJvYmFyUG9zaWNpb25Db3JyZWN0YShwb3NpY2lvbjogbnVtYmVyLCBsaW1pdGU6IG51bWJlcik6IGJvb2xlYW4ge1xyXG4gICAgbGV0IHJlc3BvbnNlOiBib29sZWFuID0gZmFsc2U7XHJcbiAgICBpZiAocG9zaWNpb24gPj0gMCAmJiBwb3NpY2lvbiA8IGxpbWl0ZSkge1xyXG4gICAgICByZXNwb25zZSA9IHRydWU7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcmVzcG9uc2U7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCB7IEJhcmNvIH0gZnJvbSBcIi4vQmFyY29cIjtcclxuaW1wb3J0IHsgQ2FzaWxsYSB9IGZyb20gXCIuL2Nhc2lsbGFcIjtcclxuaW1wb3J0IHsgQ29vcmRlbmFkYSB9IGZyb20gXCIuL2Nvb3JkZW5hZGFcIjtcclxuaW1wb3J0IHsgRGltZW5zaW9uIH0gZnJvbSBcIi4vRGltZW5zaW9uXCI7XHJcbmltcG9ydCB7IEVzdGFkbyB9IGZyb20gXCIuL2VzdGFkb1wiO1xyXG5pbXBvcnQgeyBGbG90YSB9IGZyb20gXCIuL2Zsb3RhXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgVGFibGVybyB7XHJcbiAgcHJpdmF0ZSBfZGltZW5zaW9uOiBEaW1lbnNpb247XHJcbiAgcHJpdmF0ZSBfZmxvdGE6IEZsb3RhO1xyXG4gIHByaXZhdGUgX3RhYmxlcm86IEFycmF5PGFueT47XHJcbiAgcHJpdmF0ZSBfYmFyY29zSHVuZGlkbzogbnVtYmVyID0gMDtcclxuICBjb25zdHJ1Y3RvcihkaW1lbnNpb246IERpbWVuc2lvbikge1xyXG4gICAgdGhpcy5fZGltZW5zaW9uID0gZGltZW5zaW9uO1xyXG4gICAgdGhpcy5fZmxvdGEgPSBuZXcgRmxvdGEodGhpcy5fZGltZW5zaW9uKTtcclxuICAgIHRoaXMuX3RhYmxlcm8gPSBuZXcgQXJyYXkodGhpcy5hbmNobyk7XHJcbiAgICB0aGlzLm1vbnRhclRhYmxlcm8oKTtcclxuICB9XHJcbiAgcHJpdmF0ZSBtb250YXJUYWJsZXJvKCkge1xyXG4gICAgdGhpcy5jcmVhclRhYmxlcm8oKTtcclxuICAgIHRoaXMuY29sb2NhckZsb3RhKCk7XHJcbiAgfVxyXG4gIHByaXZhdGUgY3JlYXJUYWJsZXJvKCkge1xyXG4gICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IHRoaXMubGFyZ287IGluZGV4KyspIHtcclxuICAgICAgdGhpcy5fdGFibGVyb1tpbmRleF0gPSBuZXcgQXJyYXkodGhpcy5sYXJnbyk7XHJcbiAgICB9XHJcbiAgfVxyXG4gIHByaXZhdGUgY29sb2NhckZsb3RhKCkge1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmxvbmdpdHVkRmxvdGFDb21wbGV0YTsgaSsrKSB7XHJcbiAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgdGhpcy5nZXRMb25naXR1ZEJhcmNvRmxvdGFDb25jcmV0byhpKTsgaisrKSB7XHJcbiAgICAgICAgdGhpcy5wb25lckZsb3RhKFxyXG4gICAgICAgICAgdGhpcy5nZXRDb29yZGVuYWRhQ29uY3JldGFCYXJjbyhpLCBqKSxcclxuICAgICAgICAgIHRoaXMuZ2V0QmFyY29Db25jcmV0b0Zsb3RhKGkpLnBvc2ljaW9uZXNbal1cclxuICAgICAgICApO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG4gIHByaXZhdGUgcG9uZXJGbG90YShjb29yZGVuYWRhOiBDb29yZGVuYWRhLCBjYXNpbGxhQmFyY286IENhc2lsbGEpIHtcclxuICAgIHRoaXMuX3RhYmxlcm9bY29vcmRlbmFkYS54XVtjb29yZGVuYWRhLnldID0gY2FzaWxsYUJhcmNvO1xyXG4gIH1cclxuICBwdWJsaWMgbW9zdHJhclRhYmxlcm8oKTogU3RyaW5nIHtcclxuICAgIGxldCB0YWJsZXJvOiBTdHJpbmcgPSBcIiAgIFwiO1xyXG4gICAgdGFibGVybyArPSBcIiAgICAgXCI7XHJcbiAgICBmb3IgKGxldCBqOiBudW1iZXIgPSAwOyBqIDwgdGhpcy5hbmNobzsgaisrKSB7XHJcbiAgICAgIHRhYmxlcm8gKz0gaiArIDEgKyBcIiAgfCAgXCI7XHJcbiAgICB9XHJcbiAgICB0YWJsZXJvICs9IFwiXFxuXCI7XHJcbiAgICBmb3IgKGxldCBpOiBudW1iZXIgPSAwOyBpIDwgdGhpcy5sYXJnbzsgaSsrKSB7XHJcbiAgICAgIHRhYmxlcm8gKz0gaSArIDEgKyBcIiAgfCAgIFwiO1xyXG4gICAgICBmb3IgKGxldCBqOiBudW1iZXIgPSAwOyBqIDwgdGhpcy5hbmNobzsgaisrKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX3RhYmxlcm9baV1bal0gIT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICB0YWJsZXJvICs9IHRoaXMuZGlidWphckNhc2lsbGEodGhpcy5fdGFibGVyb1tpXVtqXSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHRhYmxlcm8gKz0gXCJYICB8ICBcIjtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgdGFibGVybyArPSBcIlxcblwiO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB0YWJsZXJvO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBkaWJ1amFyQ2FzaWxsYShfdGFibGVybzogYW55KSB7XHJcbiAgICBpZiAoX3RhYmxlcm8gPT0gXCJBXCIpIHtcclxuICAgICAgcmV0dXJuIFwiQSAgfCAgXCI7XHJcbiAgICB9XHJcbiAgICBpZiAoX3RhYmxlcm8uZXN0YWRvID09IEVzdGFkby5pbmRlbW5lKSB7XHJcbiAgICAgIHJldHVybiBcIkIgIHwgIFwiO1xyXG4gICAgfSBlbHNlIGlmIChfdGFibGVyby5lc3RhZG8gPT0gRXN0YWRvLnRvY2Fkbykge1xyXG4gICAgICByZXR1cm4gXCJUICB8ICBcIjtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiBcIkggIHwgIFwiO1xyXG4gICAgfVxyXG4gIH1cclxuICBwdWJsaWMgY29uc3VsdGFyQ2FzaWxsYShjb29yZGVuYWRhOiBDb29yZGVuYWRhKSB7XHJcbiAgICBsZXQgeDogYW55ID0gY29vcmRlbmFkYS54O1xyXG4gICAgbGV0IHk6IGFueSA9IGNvb3JkZW5hZGEueTtcclxuICAgIGxldCBjYXNpbGxhID0gdGhpcy5fdGFibGVyb1t4XVt5XTtcclxuICAgIGlmIChjYXNpbGxhID09IHVuZGVmaW5lZCkge1xyXG4gICAgICBhbGVydChcIkFndWFcIik7XHJcbiAgICAgIGNhc2lsbGEgPSBcIkFcIjtcclxuICAgIH0gZWxzZSBpZiAoY2FzaWxsYS5lc3RhZG8gPT0gRXN0YWRvLmluZGVtbmUpIHtcclxuICAgICAgYWxlcnQoXCJUb2NhZG9cIik7XHJcbiAgICAgIGNhc2lsbGEuZXN0YWRvID0gRXN0YWRvLnRvY2FkbztcclxuICAgICAgdGhpcy5fYmFyY29zSHVuZGlkbyA9IHRoaXMuX2Zsb3RhLmNvbXByb2JhckJhcmNvc1RvdGFsZXNIdW5kaWRvcyhcclxuICAgICAgICB0aGlzLl9iYXJjb3NIdW5kaWRvXHJcbiAgICAgICk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gXCJcIjtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBpc0h1bmRpZGFUb2RhRmxvdGEoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5fYmFyY29zSHVuZGlkbyA9PSB0aGlzLmxvbmdpdHVkRmxvdGE7XHJcbiAgfVxyXG4gIHB1YmxpYyBnZXQgdGFibGVybygpOiBBcnJheTxudW1iZXI+IHtcclxuICAgIHJldHVybiB0aGlzLl90YWJsZXJvO1xyXG4gIH1cclxuICBwdWJsaWMgZ2V0IG51bWVyb0JhcmNvc0h1bmRpZG9zKCk6IG51bWJlciB7XHJcbiAgICByZXR1cm4gdGhpcy5fYmFyY29zSHVuZGlkbztcclxuICB9XHJcbiAgcHVibGljIHNldCBudW1lcm9CYXJjb3NIdW5kaWRvcyhudW1lcm86IG51bWJlcikge1xyXG4gICAgdGhpcy5fYmFyY29zSHVuZGlkbyA9IG51bWVybztcclxuICB9XHJcbiAgcHJpdmF0ZSBnZXRCYXJjb0NvbmNyZXRvRmxvdGEocG9zaWNpb246IG51bWJlcik6IEJhcmNvIHtcclxuICAgIHJldHVybiB0aGlzLl9mbG90YS5mbG90YVtwb3NpY2lvbl07XHJcbiAgfVxyXG4gIHByaXZhdGUgZ2V0TG9uZ2l0dWRCYXJjb0Zsb3RhQ29uY3JldG8ocG9zaWNpb246IG51bWJlcik6IG51bWJlciB7XHJcbiAgICByZXR1cm4gdGhpcy5nZXRCYXJjb0NvbmNyZXRvRmxvdGEocG9zaWNpb24pLnNpemU7XHJcbiAgfVxyXG4gIHByaXZhdGUgZ2V0IGZsb3RhQ29tcGxldGEoKTogQmFyY29bXSB7XHJcbiAgICByZXR1cm4gdGhpcy5fZmxvdGEuZmxvdGE7XHJcbiAgfVxyXG4gIHByaXZhdGUgZ2V0IGxvbmdpdHVkRmxvdGFDb21wbGV0YSgpOiBudW1iZXIge1xyXG4gICAgcmV0dXJuIHRoaXMuZmxvdGFDb21wbGV0YS5sZW5ndGg7XHJcbiAgfVxyXG4gIHByaXZhdGUgZ2V0IGFuY2hvKCk6IG51bWJlciB7XHJcbiAgICByZXR1cm4gdGhpcy5fZGltZW5zaW9uLmFuY2hvO1xyXG4gIH1cclxuICBwcml2YXRlIGdldCBsYXJnbygpOiBudW1iZXIge1xyXG4gICAgcmV0dXJuIHRoaXMuX2RpbWVuc2lvbi5sYXJnbztcclxuICB9XHJcbiAgcHJpdmF0ZSBnZXRDb29yZGVuYWRhQ29uY3JldGFCYXJjbyhcclxuICAgIGluZGV4OiBudW1iZXIsXHJcbiAgICBwb3NpY2lvbjogbnVtYmVyXHJcbiAgKTogQ29vcmRlbmFkYSB7XHJcbiAgICByZXR1cm4gdGhpcy5nZXRCYXJjb0NvbmNyZXRvRmxvdGEoaW5kZXgpLnBvc2ljaW9uZXNbcG9zaWNpb25dLmNvb3JkZW5hZGE7XHJcbiAgfVxyXG4gIHByaXZhdGUgZ2V0IGxvbmdpdHVkRmxvdGEoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5fZmxvdGEuZmxvdGEubGVuZ3RoO1xyXG4gIH1cclxufVxyXG4iLCIvLyBHZW5lcmFyIHVuYSBzZXJpZSBkZSBiYXJjb3MgcXVlIG5vIHNlIHNvbGFwYW5cbi8vIHkgcXVlIHNvcnRlYW4gbGEgcG9zaWNpb24gaW5pY2lhbCBkZSBjYWRhIGJhcmNvXG4vL3kgZWwgc2VudGlkbyBlbiBxdWUgY3JlY2VuXG4vLyBBZGVtYXMgZWwgYXJyYXkgZGUgYmFyY29zIGNyZWFkbyBhc2VndXJhIHF1ZSBuaW5ndW5vIHNlIGhhXG4vLyBzb2xhcGFkby5cbi8vTmVjZXNpdGEgY29ub2NlciBsYSBwb3NpY2lvbiBtYXhpbWEgYSBsYSBxdWUgcHVlZGUgZGVzcGxlZ2FyIHVuIGJhcmNvXG4vLyhtYXggZmlsYSBvIGNvbHVtbmEpXG5cbmltcG9ydCB7IEJhcmNvIH0gZnJvbSBcIi4vQmFyY29cIjtcbmltcG9ydCB7IENvb3JkZW5hZGEgfSBmcm9tIFwiLi9jb29yZGVuYWRhXCI7XG5pbXBvcnQgeyBEaW1lbnNpb24gfSBmcm9tIFwiLi9EaW1lbnNpb25cIjtcbmltcG9ydCB7IFNlbnRpZG8gfSBmcm9tIFwiLi9zZW50aWRvXCI7XG5cbmV4cG9ydCBjbGFzcyBHZW5lcmFkb3JGbG90YSB7XG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgX2RpbWVuc2lvbjogRGltZW5zaW9uKSB7fVxuXG4gIHB1YmxpYyBjcmVhckJhcmNvKHRhbWFub0JhcmNvOiBudW1iZXIpOiBCYXJjbyB7XG4gICAgbGV0IHNlbnRpZG9CYXJjbzogU2VudGlkbztcbiAgICBsZXQgY29vcmRlbmFkYUluaWNpYWw6IENvb3JkZW5hZGE7XG4gICAgZG8ge1xuICAgICAgc2VudGlkb0JhcmNvID0gdGhpcy5vYnRlbmVyU2VudGlkb0FsZWF0b3JpbygpO1xuICAgICAgY29vcmRlbmFkYUluaWNpYWwgPSB0aGlzLmNyZWFyQ29vcmRlbmFkYUluaWNpYWwoKTtcbiAgICB9IHdoaWxlIChcbiAgICAgIHRoaXMuaXNEZW50cm9MaW1pdGVzKHRhbWFub0JhcmNvLCBzZW50aWRvQmFyY28sIGNvb3JkZW5hZGFJbmljaWFsKVxuICAgICk7XG4gICAgbGV0IGJhcmNvOiBCYXJjbyA9IG5ldyBCYXJjbyh0YW1hbm9CYXJjbywgY29vcmRlbmFkYUluaWNpYWwsIHNlbnRpZG9CYXJjbyk7XG4gICAgcmV0dXJuIGJhcmNvO1xuICB9XG4gIHByaXZhdGUgb2J0ZW5lck51bWVyb0FsZWF0b3JpbyhtaW5pbW86IG51bWJlciwgbWF4aW1vOiBudW1iZXIpOiBudW1iZXIge1xuICAgIG1heGltbyArPSAxO1xuICAgIGxldCBhbGVhdG9yaW86IG51bWJlciA9IE1hdGgucmFuZG9tKCkgKiAobWF4aW1vIC0gbWluaW1vICsgbWluaW1vKTtcbiAgICByZXR1cm4gTWF0aC5mbG9vcihhbGVhdG9yaW8pO1xuICB9XG5cbiAgcHJpdmF0ZSBvYnRlbmVyU2VudGlkb0FsZWF0b3JpbygpOiBTZW50aWRvIHtcbiAgICBsZXQgc2VudGlkbzogU2VudGlkbztcbiAgICBsZXQgbnVtZXJvQWxlYXRvcmlvID0gdGhpcy5vYnRlbmVyTnVtZXJvQWxlYXRvcmlvKDAsIDEpO1xuICAgIGlmIChudW1lcm9BbGVhdG9yaW8gPT0gMSkge1xuICAgICAgc2VudGlkbyA9IFNlbnRpZG8uYWJham87XG4gICAgfSBlbHNlIHtcbiAgICAgIHNlbnRpZG8gPSBTZW50aWRvLmRlcmVjaGE7XG4gICAgfVxuICAgIHJldHVybiBzZW50aWRvO1xuICB9XG5cbiAgcHJpdmF0ZSBjcmVhckNvb3JkZW5hZGFJbmljaWFsKCk6IENvb3JkZW5hZGEge1xuICAgIGxldCB4OiBudW1iZXIgPSB0aGlzLm9idGVuZXJOdW1lcm9BbGVhdG9yaW8oMCwgdGhpcy5fZGltZW5zaW9uLmFuY2hvKTtcbiAgICBsZXQgeTogbnVtYmVyID0gdGhpcy5vYnRlbmVyTnVtZXJvQWxlYXRvcmlvKDAsIHRoaXMuX2RpbWVuc2lvbi5sYXJnbyk7XG4gICAgbGV0IGNvb3JkZW5hZGFJbmljaWFsID0gbmV3IENvb3JkZW5hZGEoeCwgeSk7XG4gICAgcmV0dXJuIGNvb3JkZW5hZGFJbmljaWFsO1xuICB9XG4gIHByaXZhdGUgaXNEZW50cm9MaW1pdGVzKFxuICAgIHRhbWFub0JhcmNvOiBudW1iZXIsXG4gICAgc2VudGlkb0JhcmNvOiBTZW50aWRvLFxuICAgIGNvb3JkZW5hZGFCYXJjbzogQ29vcmRlbmFkYVxuICApOiBib29sZWFuIHtcbiAgICBsZXQgcG9zaWNpb25CYXJjbzogbnVtYmVyO1xuICAgIGxldCBzdXBlcmFMaW1pdGU6IGJvb2xlYW4gPSBmYWxzZTtcbiAgICBpZiAoc2VudGlkb0JhcmNvID09IFNlbnRpZG8uYWJham8pIHtcbiAgICAgIGxldCB5ID0gY29vcmRlbmFkYUJhcmNvLnk7XG4gICAgICBwb3NpY2lvbkJhcmNvID0gdGFtYW5vQmFyY28gKyB5O1xuICAgICAgbGV0IGFsdHVyYSA9IHRoaXMuX2RpbWVuc2lvbi5sYXJnbztcbiAgICAgIGlmIChwb3NpY2lvbkJhcmNvID4gYWx0dXJhKSB7XG4gICAgICAgIHN1cGVyYUxpbWl0ZSA9IHRydWU7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGxldCB4ID0gY29vcmRlbmFkYUJhcmNvLng7XG4gICAgICBwb3NpY2lvbkJhcmNvID0gdGFtYW5vQmFyY28gKyB4O1xuICAgICAgbGV0IGFuY2h1cmEgPSB0aGlzLl9kaW1lbnNpb24uYW5jaG87XG4gICAgICBpZiAocG9zaWNpb25CYXJjbyA+IGFuY2h1cmEpIHtcbiAgICAgICAgc3VwZXJhTGltaXRlID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHN1cGVyYUxpbWl0ZTtcbiAgfVxufVxuIiwiaW1wb3J0IHsgRXN0YWRvIH0gZnJvbSBcIi4vZXN0YWRvXCI7XG5pbXBvcnQgeyBDb29yZGVuYWRhIH0gZnJvbSBcIi4vY29vcmRlbmFkYVwiO1xuaW1wb3J0IHsgQ2FzaWxsYSB9IGZyb20gXCIuL2Nhc2lsbGFcIjtcbmltcG9ydCB7IFNlbnRpZG8gfSBmcm9tIFwiLi9zZW50aWRvXCI7XG5leHBvcnQgY2xhc3MgQmFyY28ge1xuICBwcml2YXRlIF9wb3NpY2lvbmVzOiBDYXNpbGxhW10gPSBbXTtcblxuICBjb25zdHJ1Y3Rvcihwcml2YXRlIF9zaXplOiBudW1iZXIsIGluaWNpYWw6IENvb3JkZW5hZGEsIGRpcmVjY2lvbjogU2VudGlkbykge1xuICAgIHRoaXMuY3JlYXJCYXJjbyhpbmljaWFsLCBkaXJlY2Npb24pO1xuICB9XG5cbiAgcHJpdmF0ZSBjcmVhckJhcmNvKGluaWNpYWw6IENvb3JkZW5hZGEsIGRpcmVjY2lvbjogU2VudGlkbykge1xuICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCB0aGlzLnNpemU7IGluZGV4KyspIHtcbiAgICAgIHRoaXMucG9zaWNpb25lcy5wdXNoKFxuICAgICAgICBuZXcgQ2FzaWxsYShuZXcgQ29vcmRlbmFkYShpbmljaWFsLngsIGluaWNpYWwueSksIEVzdGFkby5pbmRlbW5lKVxuICAgICAgKTtcbiAgICAgIGluaWNpYWwubW92ZXIoZGlyZWNjaW9uKTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgY29tcHJ1ZWJhU29sYXBhbWllbnRvKGNhc2lsbGE6IENhc2lsbGFbXSk6IGJvb2xlYW4ge1xuICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCBjYXNpbGxhLmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgZm9yIChcbiAgICAgICAgbGV0IGluZGV4T2JqZWN0ID0gMDtcbiAgICAgICAgaW5kZXhPYmplY3QgPCB0aGlzLnBvc2ljaW9uZXMubGVuZ3RoO1xuICAgICAgICBpbmRleE9iamVjdCsrXG4gICAgICApIHtcbiAgICAgICAgaWYgKFxuICAgICAgICAgIHRoaXMucG9zaWNpb25lc1tpbmRleE9iamVjdF0uY29vcmRlbmFkYS5lcXVhbHMoXG4gICAgICAgICAgICBjYXNpbGxhW2luZGV4XS5jb29yZGVuYWRhXG4gICAgICAgICAgKVxuICAgICAgICApIHtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBwdWJsaWMgZ2V0IHNpemUoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5fc2l6ZTtcbiAgfVxuICBwdWJsaWMgZ2V0Q29vcmRlbmFkYShwb3NpY2lvbjogbnVtYmVyKTogQ29vcmRlbmFkYSB7XG4gICAgcmV0dXJuIHRoaXMuX3Bvc2ljaW9uZXNbcG9zaWNpb25dLmNvb3JkZW5hZGE7XG4gIH1cblxuICBwdWJsaWMgZ2V0IHBvc2ljaW9uZXMoKTogQ2FzaWxsYVtdIHtcbiAgICByZXR1cm4gdGhpcy5fcG9zaWNpb25lcztcbiAgfVxufVxuIiwiaW1wb3J0IHsgRXN0YWRvIH0gZnJvbSBcIi4vZXN0YWRvXCI7XG5pbXBvcnQgeyBDb29yZGVuYWRhIH0gZnJvbSBcIi4vY29vcmRlbmFkYVwiO1xuXG5leHBvcnQgY2xhc3MgQ2FzaWxsYSB7XG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgX2Nvb3JkZW5hZGE6IENvb3JkZW5hZGEsIHByaXZhdGUgX2VzdGFkbzogRXN0YWRvKSB7fVxuXG4gIHB1YmxpYyBnZXQgY29vcmRlbmFkYSgpOiBDb29yZGVuYWRhIHtcbiAgICByZXR1cm4gdGhpcy5fY29vcmRlbmFkYTtcbiAgfVxuXG4gIHB1YmxpYyBnZXQgZXN0YWRvKCk6IEVzdGFkbyB7XG4gICAgcmV0dXJuIHRoaXMuX2VzdGFkbztcbiAgfVxuXG4gIHB1YmxpYyBzZXQgY29vcmRlbmFkYSh2YWx1ZTogQ29vcmRlbmFkYSkge1xuICAgIHRoaXMuX2Nvb3JkZW5hZGEgPSB2YWx1ZTtcbiAgfVxuXG4gIHB1YmxpYyBzZXQgZXN0YWRvKHZhbHVlOiBFc3RhZG8pIHtcbiAgICB0aGlzLl9lc3RhZG8gPSB2YWx1ZTtcbiAgfVxufVxuIl0sInNvdXJjZVJvb3QiOiIifQ==